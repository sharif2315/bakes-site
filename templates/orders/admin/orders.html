{% extends "wagtailadmin/base.html" %}
{% load django_vite %}

{% block content %}
    {% vite_hmr_client %}
    {% vite_asset 'static/js/main.js' %}

    {% include "wagtailadmin/shared/header.html" with title="Orders" %}


    <!--
    
    Fields to filter for orders:

    Text Input:
    - name
    - contact (email, phone)
    - postcode, address fields - use property order.single_line

    Select Input:
    - order status
    
    Date Input:
    - requested date


    how to best sort the orders qs? 
    filter out the completed orders onto another tab in same page? 

    -->   
    
    <div class="nice-padding space-y-6">

        <!-- Search Input Group -->
        <form 
            class="space-y-6"
            x-ref="form"
            hx-get="{% url 'view_orders' %}"
            hx-target="#orders-table"
            hx-push-url="true"
            hx-swap="outerHTML"
        >

            <!-- Search Text Input -->
            <div class="w-field__input max-w-xl relative">
                <input 
                type="text" 
                name="q" 
                placeholder="Searchâ€¦"
                value="{{ request.GET.q }}"
                />        
                {% comment %} <svg class="icon icon-search w-field__icon" aria-hidden="true"><use href="#icon-search"></use></svg> {% endcomment %}
                <span class="absolute inset-y-0 right-2 grid w-8 place-content-center">
                    <button type="submit" aria-label="Submit" class="rounded-full p-1.5 text-gray-700 transition-colors hover:bg-gray-100">
                        <svg xmlns="http://www.w3.org/2000/svg" class="size-4" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
                        </svg>
                    </button>
                </span>                
            </div>    

            <!-- Order Status & Date Input Group-->
            <div class="flex flex-col-reverse sm:flex-row gap-0 sm:gap-6 mb-3 __sm:mb-0">

                <!-- Select Input - Order Status -->
                <div>
                    <label for="datepicker" class="block mb-1 text-sm font-medium text-neutral-500">Status</label>
                    <select name="order_status" class="__w-field__input">
                        <option value="">Select status</option>
                        {% for value, label in status_choices %}
                        <option value="{{ value }}">{{ label }}</option>
                        {% endfor %}
                    </select>            
                </div>

                <!-- Select Input - Delivery Option -->
                <div>
                    <label for="datepicker" class="block mb-1 text-sm font-medium text-neutral-500">Delivery</label>
                    <select name="delivery_method" class="__w-field__input">
                        <option value="">Select method</option>
                        <option value="delivery">Delivery</option>
                        <option value="collection">Collection</option>
                    </select>            
                </div>
                

            </div>
    
        </form>

        <!-- Orders Table -->
         {% include 'orders/admin/partials/_orders_table.html' %}

    </div>
{% endblock %}